# 作用域
>几乎所有的编程语言，都能够储存变量的值，并且能在之后对其进行修改或访问。 正是这种储存和访问变量的值的能力将状态带给了程序.<br>
>但是这些变量储存在哪里？ 程序需要时如何能找到它们？这些问题说明需要一套设计良好的规则来存储变量，并且之后可以方便的找到这些变量。这套规则就叫作 __作用域__

## 编译原理
<p>尽管通常将 JavaScript 归类为“动态”或“解释执行”语言，但事实上它是一门编译语言。但与传统的编译语言不同，它不是提前编译的，编译结果也不能在分布式系 统中进行移植。
</p>
<p>在传统编译语言中,程序的一段代码在执行前会经历三个步骤,统称为 编译 </p>

### 1.分词/词法分析
> 这个过程会将由字符组成的字符串分解成 (对编程语言来说) 有意义的代码块,这些代码块被称为 __词法单元__ (token)
```
    var a = 2;
```
<p>这段程序通常会被分解成为下面的语法单</p>    

```
    var , a , = , 2 , ;   
```
>空格是否会被当做测法单元, 取决于空格在这语言中是否有意义

### 2.解析/语法分析

> 这个过程是将词法单元流 (数组) 转成一个由元素逐级嵌套所组成的代表了程序语法结构的树.这个树被称为"抽象语法树"(Abstract Syntax Tree ,  AST)

### 3.代码生成

>将AST转换为可执行代码的过程被称为代码生成,这个过程与语言,平台等息息相关


--------------

<p>比起那些编译过程只有3步的语言编辑器, javascript引擎要复杂的多, 比如在语法分析和代码生成阶段有特定的步骤来对运行性能进行优化,包括对冗余元素进行优化等</p>

<p>首先,javascript不会有大量的时间来进行优化, 因为与其他语言不同, JavaScript的编译过程不是发生在构建之前</p>

>对JavaScript来说, 大部分情况编译发生在代码执行前的几微秒(甚至更短)

__简单来说任何JavaScript代码片段在执行前都要进行编译(通常就在执行前).因此JavaScript编译器首先会对 var a = 2进行编译, 然后做好执行它的准备, 并且通常马上就会执行__

## 理解作用域
>学习作用的方式是将这个过程模拟成几个人物之间的对话

### 演员表
>首先介绍将要参与到对程序 var a=2; 进行处理的过程中的演员们,这样才能理解他们的对话

*   引擎<br />
    从头到位负责整个JavaScript程序的编译及执行过程.

*   编译器<br />
    引擎的好朋友之一,负责语法分析及代码生成等脏活累活

*   作用域<br />
    引擎的另一位好友,负责收集并维护由所有声明的标识符 (变量)组成的一系列查询,并实施一套非常严格的规则,确定当前执行的代码对这些标识符的访问权限

### 对话
> 当你看见 var a=2 这段程序时, 很可能认为这是一句声明, 但是引擎却不这么认为, 事实上,引擎认为这里有两个完全不同的声明, 一个由编译器在编译时处理,另一个则有引擎在运行时处理

<p>将var a = 2 分解,看看引擎和它的朋友们是如何协同工作的.</p>

<p>编译器首先会将这段程序分解成词法单元, 然后将词法单元解析成一个树结构. 但是当编译器开始进行代码生成时, 它对这段程序的处理方式会和预期有所不同</p>

#### 事实上编辑器会进行如下处理.
1.   遇到var a编译器会询问作用域是否已经有一个该名称的变量存在于同一个作用域的集合       中. 如果是, 编译器会忽略该声明,继续进行编译; 否则它会要求作用域在当前作用域的     集合声明一个新的变量,并命名为 a

2.  接下来编译器会为引擎生成运行时所需的代码,这些代码被用来处理 a= 2这个赋值操作.引     擎运行时会首先询问作用域, 在当前作用域集合中是否存在一个叫做 a的变量. 如果是,引      擎就会使用这个变量, 如果否,引擎会继续查找该变量,如果能够找到就会对它赋值.

   




